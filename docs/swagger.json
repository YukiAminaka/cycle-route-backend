{
    "swagger": "2.0",
    "info": {
        "description": "This is a server for Cycle-Route API.",
        "title": "Cycle-Route API",
        "contact": {},
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/routes": {
            "post": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "routes"
                ],
                "summary": "ルートを作成する",
                "parameters": [
                    {
                        "description": "Create Route Request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/route.CreateRouteRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/route.RouteResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/routes/{route_id}": {
            "get": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "routes"
                ],
                "summary": "ルートを取得する",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Route ID",
                        "name": "route_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/route.RouteResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "routes"
                ],
                "summary": "ルートを更新する",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Route ID",
                        "name": "route_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Update Route Request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/route.UpdateRouteRequest"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "routes"
                ],
                "summary": "ルートを削除する",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Route ID",
                        "name": "route_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "ユーザーを作成する",
                "parameters": [
                    {
                        "description": "Create User Request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.CreateUserRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/user.UserResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/{id}": {
            "get": {
                "security": [
                    {
                        "CookieAuth": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "ユーザーを取得する",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/user.UserResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/users/{user_id}/routes": {
            "get": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "routes"
                ],
                "summary": "ユーザーのルート一覧を取得する",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Keyword to search in route names",
                        "name": "keyword",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Minimum distance filter",
                        "name": "min_distance",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Maximum distance filter",
                        "name": "max_distance",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Minimum elevation gain filter",
                        "name": "min_elevation",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Maximum elevation gain filter",
                        "name": "max_elevation",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Visibility filter",
                        "name": "visibility",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Author filter",
                        "name": "author",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/route.RouteListResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "response.ErrorResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "example": 400
                },
                "msg": {
                    "type": "string",
                    "example": "Bad Request"
                }
            }
        },
        "route.CoursePointRequest": {
            "type": "object",
            "required": [
                "location"
            ],
            "properties": {
                "bearing_after": {
                    "type": "integer"
                },
                "bearing_before": {
                    "type": "integer"
                },
                "cum_dist_m": {
                    "type": "number"
                },
                "duration": {
                    "type": "number"
                },
                "instruction": {
                    "type": "string"
                },
                "location": {
                    "type": "string"
                },
                "maneuver_type": {
                    "type": "string"
                },
                "modifier": {
                    "type": "string"
                },
                "road_name": {
                    "type": "string"
                },
                "seg_dist_m": {
                    "type": "number"
                }
            }
        },
        "route.CoursePointResponse": {
            "type": "object",
            "properties": {
                "bearing_after": {
                    "type": "integer"
                },
                "bearing_before": {
                    "type": "integer"
                },
                "cum_dist_m": {
                    "type": "number"
                },
                "duration": {
                    "type": "number"
                },
                "id": {
                    "type": "string"
                },
                "instruction": {
                    "type": "string"
                },
                "location": {
                    "type": "string"
                },
                "maneuver_type": {
                    "type": "string"
                },
                "modifier": {
                    "type": "string"
                },
                "road_name": {
                    "type": "string"
                },
                "seg_dist_m": {
                    "type": "number"
                },
                "step_order": {
                    "type": "integer"
                }
            }
        },
        "route.CreateRouteRequest": {
            "type": "object",
            "required": [
                "distance",
                "duration",
                "first_point",
                "last_point",
                "name",
                "path_geom",
                "visibility"
            ],
            "properties": {
                "course_points": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.CoursePointRequest"
                    }
                },
                "description": {
                    "type": "string",
                    "maxLength": 1000
                },
                "distance": {
                    "type": "number",
                    "minimum": 0
                },
                "duration": {
                    "type": "number",
                    "minimum": 0
                },
                "elevation_gain": {
                    "type": "number",
                    "minimum": 0
                },
                "elevation_loss": {
                    "type": "number",
                    "minimum": 0
                },
                "first_point": {
                    "type": "string"
                },
                "highlighted_photo_id": {
                    "type": "integer"
                },
                "last_point": {
                    "type": "string"
                },
                "name": {
                    "type": "string",
                    "maxLength": 255
                },
                "path_geom": {
                    "type": "string"
                },
                "visibility": {
                    "type": "integer",
                    "maximum": 2,
                    "minimum": 0
                },
                "waypoints": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.WaypointRequest"
                    }
                }
            }
        },
        "route.RouteListResponse": {
            "type": "object",
            "properties": {
                "routes": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.RouteResponseModel"
                    }
                }
            }
        },
        "route.RouteResponse": {
            "type": "object",
            "properties": {
                "route": {
                    "$ref": "#/definitions/route.RouteResponseModel"
                }
            }
        },
        "route.RouteResponseModel": {
            "type": "object",
            "properties": {
                "bbox": {
                    "type": "string"
                },
                "course_points": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.CoursePointResponse"
                    }
                },
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "distance": {
                    "type": "number"
                },
                "duration": {
                    "type": "number"
                },
                "elevation_gain": {
                    "type": "number"
                },
                "elevation_loss": {
                    "type": "number"
                },
                "first_point": {
                    "type": "string"
                },
                "highlighted_photo_id": {
                    "type": "integer"
                },
                "id": {
                    "type": "string"
                },
                "last_point": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "path_geom": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "user_id": {
                    "type": "string"
                },
                "user_name": {
                    "type": "string"
                },
                "visibility": {
                    "type": "integer"
                },
                "waypoints": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.WaypointResponse"
                    }
                }
            }
        },
        "route.UpdateRouteRequest": {
            "type": "object",
            "required": [
                "distance",
                "duration",
                "first_point",
                "last_point",
                "name",
                "path_geom",
                "visibility"
            ],
            "properties": {
                "course_points": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.CoursePointRequest"
                    }
                },
                "description": {
                    "type": "string",
                    "maxLength": 1000
                },
                "distance": {
                    "type": "number",
                    "minimum": 0
                },
                "duration": {
                    "type": "number",
                    "minimum": 0
                },
                "elevation_gain": {
                    "type": "number",
                    "minimum": 0
                },
                "elevation_loss": {
                    "type": "number",
                    "minimum": 0
                },
                "first_point": {
                    "type": "string"
                },
                "highlighted_photo_id": {
                    "type": "integer"
                },
                "last_point": {
                    "type": "string"
                },
                "name": {
                    "type": "string",
                    "maxLength": 255
                },
                "path_geom": {
                    "type": "string"
                },
                "visibility": {
                    "type": "integer",
                    "maximum": 2,
                    "minimum": 0
                },
                "waypoints": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/route.WaypointRequest"
                    }
                }
            }
        },
        "route.WaypointRequest": {
            "type": "object",
            "required": [
                "location"
            ],
            "properties": {
                "location": {
                    "type": "string"
                }
            }
        },
        "route.WaypointResponse": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "location": {
                    "type": "string"
                }
            }
        },
        "user.CreateUserRequest": {
            "type": "object",
            "required": [
                "kratos_id",
                "name"
            ],
            "properties": {
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "kratos_id": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "user.UserResponse": {
            "type": "object",
            "properties": {
                "user": {
                    "$ref": "#/definitions/user.UserResponseModel"
                }
            }
        },
        "user.UserResponseModel": {
            "type": "object",
            "properties": {
                "administrative_area": {
                    "type": "string"
                },
                "country_code": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "geom": {
                    "type": "string"
                },
                "has_set_location": {
                    "type": "boolean"
                },
                "highlighted_photo_id": {
                    "type": "integer"
                },
                "id": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "locale": {
                    "type": "string"
                },
                "locality": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "postal_code": {
                    "type": "string"
                }
            }
        }
    },
    "securityDefinitions": {
        "CookieAuth": {
            "type": "apiKey",
            "name": "ory_kratos_session",
            "in": "cookie"
        }
    }
}